<html>
    <head>
    </head>
    <body>
<canvas id="c"></canvas>
<script>
    let c = document.getElementById('c');
    c.width = window.innerWidth-50;
    c.height = window.innerHeight-50;
    let ctx = c.getContext('2d');

    
    class Arm {
        constructor(length) {
            this.x = 0;
            this.y = 0;
            this.length = length;
            this.angle = 0;
        }

        endX() {
            return this.x + Math.cos(this.angle) * this.length;
        }

        endY() {
            return this.y + Math.sin(this.angle) * this.length;
        }

        lookAt(x, y) {
            this.angle = Math.atan2(y-this.y, x-this.x);
        }

    }

    let head = {x: 100, y: 100};

    let arms = [new Arm(40),
        new Arm(40),
        new Arm(40),
        new Arm(40)]

    // Two ways?
    
    addEventListener("mousemove", (e) => {
        head.x = e.clientX;
        head.y = e.clientY;
    })
    
    let target = {x: 500, y: 400};
    let gameLoop = () => {
        ctx.fillStyle = "#fff";
        ctx.fillRect(0,0,c.width, c.height);
        ctx.fillStyle = "#000";
        ctx.fillRect(target.x,target.y,2,2);


        arms[0].angle = Math.atan2(target.y-arms[0].y, target.x-arms[0].x);
        arms[0].x = head.x
        arms[0].y = head.y

        arms[1].angle = Math.atan2(head.y-arms[1].y, head.x-arms[1].x);
        arms[1].x = head.x - arms[1].length*Math.cos(arms[1].angle)
        arms[1].y = head.y - arms[1].length*Math.sin(arms[1].angle)


        //arms[0].x = target.x-arms[0].length*Math.cos(arms[0].angle);
        //arms[0].y = target.y-arms[0].length*Math.sin(arms[0].angle);
        
/*
        arms[0].angle = Math.atan2(head.y-arms[0].y, head.x-arms[0].x);
        arms[0].x = head.x-arms[0].length*Math.cos(arms[0].angle);
        arms[0].y = head.y-arms[0].length*Math.sin(arms[0].angle);

        
        for(let i = 1; i < arms.length-1; i++) {
            arms[i].angle = Math.atan2(arms[i-1].y-arms[i].y, arms[i-1].x-arms[i].x);
            arms[i].x = arms[i-1].x-arms[i].length*Math.cos(arms[i].angle);
            arms[i].y = arms[i-1].y-arms[i].length*Math.sin(arms[i].angle);
        }


        arms[3].angle = Math.atan2(target.y-arms[3].y, target.x-arms[3].x);
        arms[3].x = arms[2].x;
        arms[3].y = arms[2].y;
        */
 //       arms[3].x = target.x-arms[3].length*Math.cos(arms[3].angle);
//        arms[3].y = target.y-arms[3].length*Math.sin(arms[3].angle);

        for(let i=0; i < arms.length; i++) {
            ctx.fillStyle = "#a00";
            ctx.fillRect(arms[i].x,arms[i].y,5,5);
            ctx.fillStyle= "#0a0";
            ctx.fillRect(arms[i].endX()+5,arms[i].endY(),5,5);
            ctx.fillText(""+ i, arms[i].x, arms[i].y )
            ctx.beginPath();
            ctx.moveTo(arms[i].x, arms[i].y);
            ctx.lineTo(arms[i].endX(), arms[i].endY());
            ctx.stroke();
        }
        ctx.fillRect(head.x, head.y,10,10);
        requestAnimationFrame(gameLoop);

    }

    gameLoop();
    </script>
    </body>
</html>

